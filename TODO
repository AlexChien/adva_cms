[fix] routes for pagination are missing
[fix] separate login and admin/login pages (same thing, different layout)
[fix] acts_as_list is only used in Asset. can we remove that?
[fix] currently broken: belongs_to_author: with_deleted => true
[fix] js'ify all dates and use js date format
[fix] adapt has_counter for approved_comments      

[feature] [content] pipe all filtered column results (*_html) through whitelist sanitizer
[feature] [wiki] implement wikipage admin area (analog to articles area)
[feature] [wiki] add various filters to admin wikipage list (like on admin articles list)
[feature] [wiki] make the 'home' wikipage permalink configurable per wiki
[feature] [comments] add various filters to admin comments list (like on admin articles list)
[feature] [comments] after a comment was posted, display it on a comments/show page with messages and a form to edit it
[feature] [comments] allow anonymous comment editing (for a couple of minutes, based on the cookie token)
[feature] [blog] miss tricky says that xml_rpc is a must
[fix] [wiki] force username present on wikipage save

[interface] sites list: should have a link to settings (edit)

[plugin] pingback plugin
[plugin] comment email notification
[major] add spam protection for comments and wikipages (look at viking + multiengine branch)
[major] implement search

[feature] add before_move and after_move hooks to better_nested_set
[feature] make cacheable_flash behave completely transparent (i.e. do not clear flash after writing it to the cookie)
          rational: controller specs should work and controllers behave correctly
          not matter if the plugin is installed or not

[fix] wiki categories aren't that common. should be available, but probably not by default.
      possible solution: have a section setting "manage categories for this section"? that would 
      even allow to manage categories per Section, but requires to explicitely turn it on.

[feature] admin section: have an activity center/dashboard where engines can register their
          widgets (partials) to. e.g.: "x comments are awaiting your approval",
          "Please change your administrator password!" etc.


[theme] default theme: increase font size by 1px
[theme] microformat everything: hcard, hatom


# broken + missing specs

[specs] spec widgets
[specs] spec and implement admin/wikipage section
[specs] implement themes + theme_file specs
[specs] implement assets specs
[specs] spec registration, login, authentication
[specs] integration/stories
[specs] spec usage of xss_terminate in one place (so that one can easily 
        see which attributes get filtered and which don't)
[specs] controllers: spec various error conditions like record not found
[specs] controllers: simplify specs by circumventing the routing filters
        (i.e. use paths like they would be recognized when no filters are
        being used)

# resources
viking http://github.com/technoweenie/viking/tree/master
defensio http://blog.teksol.info/2008/3/4/mephisto-defensio-refactored-to-patterns
authentication http://authentication.rubyforge.org/

apache multisite config http://www.appelsiini.net/2007/6/mephisto-multiple-site-config

------------------------------------------------------------------------------



# users

[feature] ajax users online feature?
[feature] have a config option to allow users to register for all sites or per site (?)

# forum
    
    use categories to model sub-forums + forum lists?

    recent posts list
    feeds
    
    hot topics
    topic activity since last visit (highlight topics that have changed since the user read them last)
    hits ?

    monitorship for forum topics, wikipages, blog articles etc.
    moderatorships => role :moderator

    add a description and description_html to sections?
    list forum moderators?
    
    refactor to generic actions that check permissions and then delegate the 
     command to the target model?
     current_user.act :create, :topic, params[:topic] (or something like that)

    this is what tentacle does:
    create_table "monitorships", :force => true do |t|
      t.integer  "profile_id"
      t.integer  "topic_id"
      t.boolean  "active",     :default => true
      t.timestamps
    end
    
    generally: breadcrumbs

    validation on has_many :through join tables:
      def uniqueness_of_relationship
        if self.class.exists?(:profile_id => profile_id, :topic_id => topic_id, :active => true)
          errors.add_to_base("Cannot add duplicate profile/topic relation")
        end
      end

# activity

[fix] deactivate activity tracking for associated objects when section, article etc. is deleted (?)
[feature] observe user registration, deactivation ....
[feature] observe section, category, asset creation etc.

# general

[enhance] how to move observer config from environment.rb to init.rb?

# capistrano

[deploy] need to use rake db:migrate:all

# themes

[feature] make ActionMailer themeable
[enhance] decouple admin interface through using a themeable instead of site
[feature] add drop-in erb- and haml-safemode support, make public controllers use safemode
[feature] use caches_page_with_references or just expire the whole cache dir
[feature] clone pre-installed themes
[enhance] make theme.files.find work without globbing all files
[major] add liquid layer (drops + helpers) (?) » add an ActionView Liquid template handler?
[major] port a simple liquid theme and test it with drops (?)

# content

[major] add attachments for wikipages (are they also in beast?)

# CacheableFlash

  after_filter won't be called when the filter chain is halted. maybe an 
  around_filter is a better choice?
  
  after_filter :write_flash_to_cookie

# Rails 

There's no method to expire compiled templates. http://pastie.org/private/2vqi8gnfwfepjtb3mz6aa

Role::Admin.new :object => nil seems to run into SystemStackError with:
  class Role belongs_to :object, :polymorphic => true
  class Role::Admin < Role

force certain after_filters to be run even if the filter chain has been halted:
    :after_filter => :bla, :force => true

section.articles.maximum(:position) returns nil when table is empty. shouldn't that be 0?

ActionController::Base#layout can't be restricted to certain formats, can it? (see BlogController + feeds)

section.radio_button :type, type (and other helpers) should create an id="section_type_blog"
even when the section is a blog (i.e. that's an STI related bug)

wikipage routing/controller: change :id to :permalink ... doesn't seem to work with resources
    http://dev.rubyonrails.org/ticket/6814 => wontfix
    http://archive.jvoorhis.com/articles/2006/08/01/announcing-resource_hacks => seems to break url_helpers
    def to_param
      "#{username.gsub(/[^a-z0-9]+/i, '-')}" if self.username
    end

# rspec

[patch] changed to following. ask for a patch:
    Spec::Rails::Example::ControllerExampleGroup.class_eval do
      def params_from(method, path, env = {})
        ensure_that_routes_are_loaded
        env.merge!({:method => method})
        ActionController::Routing::Routes.recognize_path(path, env)
      end
    end    
    

RESOURCES --------------------------------------------------------------------

Themes
    http://quotedprintable.com/pages/scribbish
    http://mad.ly/about/
    http://powazek.com/posts/516
    http://powazek.com/depo-skinny
    http://warpspire.com/hemingway/
    http://wordpress.org/
    http://www.bestwpthemes.com/
    http://railsgrunt.com/
    
Research other CMS features
    wordpress
    movable type
    http://railfrog.com/
    http://slateinfo.blogs.wvu.edu    
    http://opensource.bitscribe.net/page/Bitswiki (wiki)
    http://almosteffortless.com/eldorado/ (forum)
    http://www.rubyinside.com/community-engine-rails-plugin-that-adds-social-networking-to-your-app-901.html


http://somerandomdude.net/srd-projects/bitcons/
http://somerandomdude.net/srd-projects/clearbits



NOTES ------------------------------------------------------------------------

check http://josevalim.blogspot.com/2008/06/easy-http-cache.html
      http://github.com/josevalim/easy-http-cache/tree/master
check http://ultraviolet.rubyforge.org/
check http://code.bitsweat.net/svn/redirect_back
check http://code.bitsweat.net/svn/implicit_respond_to
check http://rubymatt.rubyforge.org/mailtrap/ for mail-related dev
check Google Syntax Highlighter ?
check http://jquery.com/blog/2008/06/09/jquery-ui-v15-released-focus-on-consistent-api-and-effects/
check http://github.com/rpheath/input_css/tree/master
check http://github.com/rtomayko/rdiscount/tree/master (RedCloth replacement in C)
check fleximage http://github.com/Squeegy/fleximage/tree/master


# Sanitizing input

contact xss_terminate developer regarding improvements/refactorings

http://code.google.com/p/xssterminate/
http://actsassanitized.devjavu.com/browser/lib/acts_as_sanitized.rb

http://code.google.com/p/sanitizeparams/
http://safe-erb.rubyforge.org/svn/plugins/safe_erb/
http://code.google.com/p/xss-shield/

http://www.ruby-forum.com/topic/133285
http://blog.thinkrelevance.com/2008/1/17/never-untaint
http://blog.thinkrelevance.com/2008/1/9/is-your-rails-app-xss-safe


# Dependency/reloading issues collect

User(#34074500) expected, got User(#13312670)

