<% content_for :filter do %>
  <% form_tag admin_comments_path, :method => 'get', :id => 'comment-search' do -%>
    <label for="search" class="inline">
      Show comments:
    </label>
    <select name="filter" id="filterlist">
      <%= options_for_select [['All', 					'all'],
 							  ['Whose state is', 		'state'],
							  ['Whose body contains', 	'body'],
							  ['Whose author is', 		'author_name'],
							  ['Authors email is', 		'author_email'],
							  ['Authors website is', 	'author_website']], params[:filter] %>
    </select>
    <select name="state" id="states">
      <%= options_for_select  [['Approved',		'approved'],
		  					   ['Unapproved',	'unapproved']], params[:state] %>      
    </select>
	<% if @section -%>
	  <%= hidden_field_tag :section_id, @section.id %>
	<% elsif @content -%>
	  <%= hidden_field_tag :content_id, @content.id %>
    <% end -%>
	<%= text_field_tag 'query', params[:query], :id => 'query', :style => 'display: none' %>
    <input type="submit" id="button" value="Go" style="display: none" />
  <% end -%>
<% end -%>

<h3>Comments on <%= link_to_admin_object(@content || @section || @site) %></h3>

<ul id="comments_list">
  <% unless @comments.empty? %>
    <% @comments.reverse.each do |comment, i| %>
    <li class="<%= cycle 'alt', '' %>" id="<%= dom_id(comment) %>">
      <%= render :partial => 'comment', :object => comment %>
    </li>
    <% end %>
  <% else %>
    <li class="alt">This <%= (@content || @section) ? (@content || @section).type.downcase : 'site' %> has no comments matching your query.</li>
  <% end %>
</ul>


<script type="text/javascript" language="javascript" charset="utf-8">
// <![CDATA[
  var comment = $(document.location.hash.substring(1));
  if(comment) Element.addClassName(comment, 'highlight');
// ]]>
</script>
